(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,n,t){e.exports=t(396)},211:function(e,n,t){},396:function(e,n,t){"use strict";t.r(n);var a,o=t(0),i=t.n(o),r=t(11),l=t.n(r),c=t(19),s=t(51),p=(t(211),t(22)),u=t(23),g=t(26),d=t(24),m=t(27),y=t(77),h=t.n(y),f=t(63),v=t(131),E=t.n(v),S=t(78),b=t.n(S),k="mediaSession"in navigator;k&&(navigator.mediaSession.setActionHandler("previoustrack",function(){if(a){var e=a.getState(),n=0===e.playState.songId?e.songs.length-1:e.playState.songId-1;a.dispatch(A(n))}}),navigator.mediaSession.setActionHandler("nexttrack",function(){if(a){var e=a.getState(),n=(e.playState.songId+1)%e.songs.length;a.dispatch(A(n))}}),navigator.mediaSession.setActionHandler("play",function(){a&&a.dispatch(I())}),navigator.mediaSession.setActionHandler("pause",function(){a&&a.dispatch(I())}));var O=function(e){a=e},w=function(e){k&&function(e){var n=a.getState();console.log("New song",n.songs[e]),navigator.mediaSession.metadata=new window.MediaMetadata({title:n.songs[e].name,artist:"Unknown",album:"Unknown Albumn",artwork:[{src:"icons/mipmap-xhdpi/ic_launcher.png",sizes:"96x96",type:"image/png"},{src:"icons/mipmap-xxhdpi/ic_launcher.png",sizes:"144x144",type:"image/png"},{src:"icons/mipmap-xxxhdpi/ic_launcher.png",sizes:"192x192",type:"image/png"},{src:"icons/playstore/icon.png",sizes:"512x512",type:"image/png"}]})}(e)},P="PLAYLIST_PAGE",j="SETTINGS_PAGE",x="NOW_PLAYING_PAGE",N=function(e){return{type:"ADD_SONGS",songs:e}},A=function(e){return w(e),{type:"PLAY_SONG",id:e}},I=function(){return{type:"TOGGLE_PLAYING"}},T=t(66),R=t(41),C=t(79),_=t.n(C),L=function(e){function n(e){var t;return Object(p.a)(this,n),(t=Object(g.a)(this,Object(d.a)(n).call(this,e))).addSong=t.addSong.bind(Object(R.a)(Object(R.a)(t))),t.triggerInput=t.triggerInput.bind(Object(R.a)(Object(R.a)(t))),t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"triggerInput",value:function(){this.fileInput.click()}},{key:"addSong",value:function(e){(0,this.props.addSongs)(e.currentTarget.files)}},{key:"render",value:function(){var e=this;return i.a.createElement(_.a,{onClick:this.triggerInput,backgroundColor:"#7050FA",style:{position:"fixed",bottom:"120px",right:"25px",zIndex:3e3}},i.a.createElement("span",{style:{color:"white",fontSize:"30px",fontWeight:200}},"+"),i.a.createElement("label",{htmlFor:"song-input",className:"sr-only"},"Pick a song",i.a.createElement("input",{style:{display:"none"},id:"song-input",ref:function(n){e.fileInput=n},onChange:this.addSong,type:"file",multiple:!0,accept:"audio/mp3"})))}}]),n}(i.a.Component),G=Object(c.b)(null,function(e){return{addSongs:function(n){return e(N(n))}}})(L),D=t(64),M=t.n(D),U=t(50),H=t(83),B=t.n(H),z=t(40),W=t.n(z),F=t(25),Y=t.n(F),V=t(16),q=t.n(V),J=t(200),K=t.n(J),$=t(201),Q=function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=Object(g.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).handleClick=function(){var e=t.props;(0,e.playSong)(e.index)},t.removeSong=function(){var e=t.props;(0,e.removeSong)(e.index)},t.menuOptions=function(){return i.a.createElement("div",null,i.a.createElement(Y.a,{onClick:t.removeSong,primaryText:"RemoveSong"}),i.a.createElement(Y.a,{onClick:t.props.openSnackbar,primaryText:"Add to Playlist"}))},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props.song;return i.a.createElement(U.ListItem,{className:"song",onClick:this.handleClick,leftAvatar:i.a.createElement(W.a,{icon:i.a.createElement(B.a,null)}),primaryText:i.a.createElement("div",{className:"song-title"},e.name),rightIconButton:i.a.createElement($.a,{iconButtonElement:i.a.createElement(q.a,null,i.a.createElement(K.a,null)),anchorOrigin:{horizontal:"right",vertical:"top"},targetOrigin:{horizontal:"right",vertical:"top"}},this.menuOptions())})}}]),n}(o.Component),X=Object(c.b)(null,function(e){return{removeSong:function(n){return e(function(e){return{type:"REMOVE_SONGS",id:e}}(n))},playSong:function(n){return e(A(n))}}})(Q),Z=function(e){var n=e.songs;return n[0]?i.a.createElement("div",{style:{marginBottom:"100px"}},i.a.createElement(U.List,null,n.map(function(e,n){return i.a.createElement("div",{key:"song-".concat((1e7*Math.random()).toFixed(0),"-").concat(e.size)},i.a.createElement(X,{song:e,index:n}),i.a.createElement(M.a,{key:e.lastModified}))}))):i.a.createElement("h4",{style:{fontWeight:300,textAlign:"center"}},"No Songs Present. Please Add Songs")},ee=t(14),ne=t.n(ee),te=t(18),ae=t.n(te),oe=t(81),ie=t.n(oe),re=function(e){var n=e.playState,t=e.playingSong,a=e.currentTime,o=e.togglePlaying,r=e.openNowPlaying,l=n.playing?"pause_circle_filled":"play_circle_filled";return i.a.createElement(ne.a,{className:"small-now-playing",zDepth:5,rounded:!1},i.a.createElement(ie.a,{className:"song-progress",mode:"determinate",min:0,max:100,value:a}),i.a.createElement("div",{style:{display:"flex",padding:"20px 10px"},className:"now-playing-container"},i.a.createElement("div",{style:{width:"90%"},role:"button",tabIndex:"0",onClick:t&&r},i.a.createElement("div",{style:{width:"15%",display:"inline-block"}},i.a.createElement(W.a,{icon:i.a.createElement(B.a,null)})),i.a.createElement("div",{style:{display:"inline-block",width:"77%"},className:"song-title"},t?t.name:"[No song]")),i.a.createElement("div",{style:{width:"50px"},className:"play-pause-button"},i.a.createElement(q.a,{onClick:o},i.a.createElement(ae.a,{style:{fontSize:"60px"},className:"material-icons"},l)))))},le=function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(g.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).handleDragOver=function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.songs,a=n.playState,o=n.openNowPlaying,r=n.openSnackbar,l=n.currentTime,c=n.addSongs,s=n.toggle;return i.a.createElement("div",{style:{height:"100%"},onDragOver:this.handleDragOver,onDrop:function(n){if(e.handleDragOver(n),window.File&&window.FileReader&&window.FileList&&window.Blob){var t=Object(T.a)(n.dataTransfer.files).filter(function(e){var n=e.name;return n&&n.endsWith(".mp3")});t.length>0&&c(t)}else r("The File APIs are not fully supported in this browser.");return!1}},i.a.createElement(Z,{songs:t}),i.a.createElement(G,null),i.a.createElement(re,{togglePlaying:s,playState:a,playingSong:t[a.songId],openNowPlaying:o,currentTime:l}))}}]),n}(o.Component),ce=Object(c.b)(null,function(e){return{toggle:function(){return e(I())},openNowPlaying:function(){return e({type:x})},addSongs:function(n){return e(N(n))}}})(le),se=t(65),pe=t.n(se),ue=t(80),ge=t.n(ue),de=t(132),me=t.n(de),ye=t(133),he=t.n(ye),fe=function(e){function n(e){var t;return Object(p.a)(this,n),(t=Object(g.a)(this,Object(d.a)(n).call(this,e))).openPage=function(e){return function(){var n=t.props,a=n.openPage,o=n.playState,i=n.openSnackbar;t.setState(function(e){return{open:!e.open}}),e!==P&&e!==j?(o||e!==x)&&e&&a(e):i()}},t.state={open:!1},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.state.open;return i.a.createElement("div",null,i.a.createElement(pe.a,{iconElementLeft:i.a.createElement(me.a,{onClick:this.openPage()},i.a.createElement(he.a,null)),style:{backgroundColor:"#7050FA",position:"fixed"},title:"Music Player"}),i.a.createElement("div",{className:"header-padding",style:{height:"60px"}}),i.a.createElement(ge.a,{docked:!1,open:e},i.a.createElement(pe.a,{title:"Menu",showMenuIconButton:!1}),i.a.createElement(Y.a,{onClick:this.openPage("HOME_PAGE")},"Home"),i.a.createElement(Y.a,{onClick:this.openPage(x)},"NowPlaying"),i.a.createElement(Y.a,{onClick:this.openPage(P)},"Playlists"),i.a.createElement(Y.a,{onClick:this.openPage(j)},"Settings")))}}]),n}(o.Component),ve=Object(c.b)(null,function(e){return{openPage:function(n){return e({type:n})}}})(fe),Ee=t(82),Se=t.n(Ee),be=function(e){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(g.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).changeRepeat=function(){var e=t.props,n=e.repeatType;(0,e.changeRepeat)(2===n?0:n+1)},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.installEvent;setTimeout(function(){return"function"===typeof e&&e()},3e3)}},{key:"render",value:function(){var e=this.props,n=e.playState,t=e.song,a=e.playNext,o=e.playPrevious,r=e.currentTime,l=e.repeatType,c=e.togglePlaying,s=e.timeDrag,p=e.openSnackbar,u=n.playing?"pause_circle_filled":"play_circle_filled",g=0===l?i.a.createElement(ae.a,{onClick:this.changeRepeat,style:{color:"rgba(0, 0, 0, 0.3)"},className:"material-icons"},"repeat"):i.a.createElement(q.a,null,i.a.createElement(ae.a,{onClick:this.changeRepeat,className:"material-icons"},1===l?"repeat_one":"repeat"));return i.a.createElement(ne.a,{className:"play-control",zDepth:0,rounded:!1},i.a.createElement("h3",{className:"song-title"},t.name),i.a.createElement(Se.a,{style:{height:"2px"},className:"song-progress",value:r,onChange:function(e,n){return s(n)},max:100,min:0,defaultValue:2}),i.a.createElement("div",{className:"now-playing-container"},i.a.createElement("div",{style:{width:"35%",textAlign:"center"},className:"side-icons"},g,i.a.createElement(q.a,null,i.a.createElement(ae.a,{onClick:o,className:"material-icons"},"skip_previous"))),i.a.createElement("div",{style:{width:"30%",textAlign:"center"},className:"play-pause-button"},i.a.createElement(q.a,null,i.a.createElement(ae.a,{onClick:c,style:{fontSize:"50px",width:"50px"},className:"material-icons"},u))),i.a.createElement("div",{style:{width:"35%",textAlign:"center"},className:"side-icons"},i.a.createElement(q.a,null,i.a.createElement(ae.a,{onClick:a,className:"material-icons"},"skip_next")),i.a.createElement(ae.a,{className:"material-icons",style:{color:"rgba(0, 0, 0, 0.3)"},onClick:function(){return p("Shuffle doesn't work yet, You can make a PR \ud83d\ude0a")}},"shuffle"))))}}]),n}(o.Component),ke=Object(c.b)(function(e){return{playState:e.playState,repeatType:e.common.repeat}},function(e){return{changeRepeat:function(n){return e(function(e){return{type:"REPEAT",id:e}}(n))},togglePlaying:function(){return e(I())}}})(be),Oe=function(e){var n=e.playNext,t=e.timeDrag,a=e.repeatType,o=e.currentTime,r=e.playingSong,l=e.openSnackbar,c=e.playPrevious,s=e.installEvent;return i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"30px"}},i.a.createElement(ae.a,{className:"material-icons",style:{width:"300px",fontSize:"300px",color:"rgba(0,0,0,0.3)"}},"album")),i.a.createElement(ke,{song:r,playNext:n,timeDrag:t,repeatType:a,installEvent:s,currentTime:o,openSnackbar:l,playPrevious:c}))},we=["ARROWLEFT","ARROWRIGHT","SPACE"];var Pe=E()({palette:{primary1Color:f.indigo400}}),je=function(e){function n(e){var t;return Object(p.a)(this,n),(t=Object(g.a)(this,Object(d.a)(n).call(this,e))).playNext=function(){var e=t.props,n=e.songs,a=e.playState,o=e.playSong;URL.revokeObjectURL(n[a.songId]),o((a.songId+1)%n.length)},t.songEnded=function(){var e=t.props,n=e.songs,a=e.playState,o=e.repeatType,i=e.playSong;0===o?(URL.revokeObjectURL(n[a.songId]),a.songId<n.length&&i(a.songId+1)):1===o?i(a.songId):t.playNext()},t.playPrevious=function(){var e=t.props,n=e.songs,a=e.playState,o=e.playSong;URL.revokeObjectURL(n[a.songId]),o(0===a.songId?n.length-1:a.songId-1)},t.updateTime=function(){var e=100*t.audioPlayer.currentTime/t.audioPlayer.duration||0;t.setState({currentTime:e})},t.playSong=function(e){var n=t.props.songs;if(n[e]){var a=URL.createObjectURL(n[e]);t.audioPlayer.src=a,t.audioPlayer.play(),window.document.title=n[e].name.replace(".mp3","")}},t.timeDrag=function(e){t.audioPlayer.currentTime=t.audioPlayer.duration*(e/100)},t.handleActionClick=function(){window.open("https://github.com/ashinzekene/react-music-player","_blank")},t.handleRequestClose=function(){t.setState({snackBarOpen:!1,snackMsg:"",hideSnackAction:!1})},t.state={currentTime:0,snackBarOpen:!1,hasRejectedInstall:!1,snackMsg:"",hideSnackAction:!1,installEvent:null,addToHomeScreenUIVisible:!1},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=this.props,t=n.songs,a=n.toggle;t[0]&&(this.audioPlayer.src=URL.createObjectURL(t[0])),this.releaseKeyboardEvents=function(e){var n=function(n){var t=n.code.toUpperCase();if(-1!==we.indexOf(t)){var a=e.playNext,o=e.playPrevious,i=e.togglePlaying;switch(t){case"ARROWLEFT":o();break;case"ARROWRIGHT":a();break;case"SPACE":i()}}};return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}({playNext:this.playNext,playPrevious:this.playPrevious,togglePlaying:a}),window.addEventListener("beforeinstallprompt",function(n){n.preventDefault(),console.log("before install fired",n),e.setState({installEvent:n,addToHomeScreenUIVisible:!0})})}},{key:"componentWillReceiveProps",value:function(e){var n=this,t=this.props.playState,a=this.state,o=a.installEvent,i=a.hasRejectedInstall;e.playState!==t&&(e.playState.playing?0===e.playState.songId?this.playSong(0):e.playState.songId===t.songId?this.audioPlayer.play():this.playSong(e.playState.songId):this.audioPlayer.pause(),o&&!i&&(o.prompt(),o.userChoice.then(function(e){"accepted"===e.outcome?(console.log("User accepted the A2HS prompt"),n.setState({snackBarOpen:!0,hideSnackAction:!0,snackMsg:"\ud83e\udd17 Yay! You've installed the app"})):(console.log("User dismissed the A2HS prompt"),n.setState({snackBarOpen:!0,hideSnackAction:!0,hasRejectedInstall:!0,snackMsg:"\ud83d\ude25 Reload the page whenever you change your mind"})),n.snackBarOpen({installEvent:null})})))}},{key:"componentWillUnmount",value:function(){this.releaseKeyboardEvents()}},{key:"render",value:function(){var e=this,n=this.state,t=n.currentTime,a=n.snackBarOpen,o=n.snackMsg,r=n.installEvent,l=n.addToHomeScreenUIVisible,c=n.hideSnackAction,s=this.props,p=s.songs,u=s.playState,g=s.openNowPlaying,d=s.toggle,m=s.repeatType,y=s.page;return i.a.createElement(h.a,{muiTheme:Pe},i.a.createElement("div",null,i.a.createElement(ve,{playState:u,addToHomeScreenUIVisible:l,playingSong:p[u.songId],openSnackbar:function(){return e.setState({snackBarOpen:!0})}}),i.a.createElement("audio",{hidden:!0,controls:!0,onEnded:this.songEnded,onTimeUpdate:this.updateTime,ref:function(n){e.audioPlayer=n}},i.a.createElement("track",Object.assign({kind:"captions"},{}))),y===x?i.a.createElement(Oe,{repeatType:m,playNext:this.playNext,timeDrag:this.timeDrag,installEvent:r,currentTime:t,playPrevious:this.playPrevious,playingSong:p[u.songId],openSnackbar:function(n){return e.setState({snackBarOpen:!0,snackMsg:n})}}):i.a.createElement(ce,{songs:p,toggle:d,playState:u,currentTime:t,openNowPlaying:g,openSnackbar:function(n){return e.setState({snackBarOpen:!0,snackMsg:n})}}),i.a.createElement(b.a,{open:a,action:!c&&"make a PR \ud83d\ude0a",autoHideDuration:4e3,onActionClick:this.handleActionClick,onRequestClose:this.handleRequestClose,message:o||"Not Implemented yet, You can make a PR \ud83d\ude0a"})))}}]),n}(o.Component),xe=Object(c.b)(function(e){return{page:e.page,songs:e.songs,playState:e.playState,repeatType:e.common.repeat}},function(e){return{toggle:function(){return e(I())},playSong:function(n){return e(A(n))}}})(je),Ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ae(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ie={playing:!1,songId:0},Te=t(136),Re={sidebarOpen:!1,repeat:0},Ce=Object(s.b)({songs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_SONGS":return Object(T.a)(e).concat(Object(T.a)(n.songs));case"REMOVE_SONGS":return e.filter(function(e,t){return t!==n.id});default:return e}},common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"TOGGLE_SIDEBAR":return Object(Te.a)({},e,{sidebarOpen:!e.sidebarOpen});case"REPEAT":return Object(Te.a)({},e,{repeat:n.id});default:return e}},playState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"PLAY_SONG":return{playing:!0,songId:n.id};case"TOGGLE_PLAYING":return Object.assign({},e,{playing:!e.playing});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HOME_PAGE";switch((arguments.length>1?arguments[1]:void 0).type){case"HOME_PAGE":return"HOME_PAGE";case P:return P;case x:return x;case j:return j;default:return e}}}),_e=t(135);_e.getItem("state").then(function(e){if(null!==e)return e}).then(function(e){var n;n=Object(s.c)(Ce,e),O(n),n.subscribe(function(){var e;e={songs:n.getState().songs},_e.setItem("state",e)}),l.a.render(i.a.createElement(c.a,{store:n},i.a.createElement(xe,null)),document.getElementById("root"))}),function(){if("serviceWorker"in navigator){if(new URL("/react-music-player",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/react-music-player","/service-worker.js");Ne?function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ae(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):Ae(e)})}}()}},[[202,2,1]]]);
//# sourceMappingURL=main.33e3683b.chunk.js.map