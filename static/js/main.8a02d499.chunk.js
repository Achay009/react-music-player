(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,n,t){e.exports=t(277)},144:function(e,n,t){},277:function(e,n,t){"use strict";t.r(n);var a,r=t(0),o=t.n(r),i=t(16),l=t.n(i),c=t(17),s=t(36),u=t(73),p=t(134),g=t.n(p),d=(t(144),t(19)),m=t(20),y=t(22),f=t(21),h=t(23),v=t(132),E=t.n(v),S=t(133),b=t.n(S),O="mediaSession"in navigator;O&&(navigator.mediaSession.setActionHandler("previoustrack",function(){if(a){var e=a.getState(),n=0===e.playState.songId?e.songs.length-1:e.playState.songId-1;a.dispatch(I(n))}}),navigator.mediaSession.setActionHandler("nexttrack",function(){if(a){var e=a.getState(),n=(e.playState.songId+1)%e.songs.length;a.dispatch(I(n))}}),navigator.mediaSession.setActionHandler("play",function(){a&&a.dispatch(N())}),navigator.mediaSession.setActionHandler("pause",function(){a&&a.dispatch(N())}));var k=function(e){a=e},w=function(e){O&&function(e){var n=a.getState();navigator.mediaSession.metadata=new window.MediaMetadata({title:n.songs[e].name,artist:"Unknown",album:"Unknown Albumn",artwork:[{src:"icons/mipmap-xhdpi/ic_launcher.png",sizes:"96x96",type:"image/png"},{src:"icons/mipmap-xxhdpi/ic_launcher.png",sizes:"144x144",type:"image/png"},{src:"icons/mipmap-xxxhdpi/ic_launcher.png",sizes:"192x192",type:"image/png"},{src:"icons/playstore/icon.png",sizes:"512x512",type:"image/png"}]})}(e)},P="PLAYLIST_PAGE",j="SETTINGS_PAGE",A="NOW_PLAYING_PAGE",T=function(e){return{type:"ADD_SONGS",songs:e}},I=function(e){return w(e),{type:"PLAY_SONG",id:e}},N=function(){return{type:"TOGGLE_PLAYING"}},x=t(43),R=t(105),C=t.n(R),L=t(106),G=t.n(L),D=function(e){function n(){var e,t;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(y.a)(this,(e=Object(f.a)(n)).call.apply(e,[this].concat(r)))).addSong=function(e){(0,t.props.addSongs)(e.currentTarget.files)},t}return Object(h.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){return o.a.createElement(C.a,{color:"primary","aria-label":"Add",component:"label",htmlFor:"song-input",style:{position:"fixed",bottom:"110px",right:"25px",zIndex:3e3}},o.a.createElement("input",{style:{display:"none"},id:"song-input",onChange:this.addSong,type:"file",multiple:!0,accept:"audio/mp3"}),o.a.createElement(G.a,null))}}]),n}(r.Component),M=Object(c.b)(null,function(e){return{addSongs:function(n){return e(T(n))}}})(D),_=t(74),U=t(56),H=t(112),B=t.n(H),W=t(71),Y=t.n(W),z=t(110),F=t.n(z),V=t(111),K=t.n(V),q=t(25),J=t.n(q),$=t(42),Q=t.n($),X=t(107),Z=t.n(X),ee=t(62),ne=t.n(ee),te=t(108),ae=t.n(te),re=t(60),oe=t.n(re),ie=t(109),le=t.n(ie),ce=t(61),se=t.n(ce),ue=function(e){var n=e.song,t=e.handleClick,a=e.handleIconClick;return o.a.createElement(Q.a,{className:"song",onClick:t},o.a.createElement(Z.a,null,o.a.createElement(oe.a,null,o.a.createElement(se.a,null))),o.a.createElement(ne.a,{primary:n.name,secondary:null}),o.a.createElement(ae.a,{onClick:a},o.a.createElement(J.a,{"aria-label":"Delete"},o.a.createElement(le.a,null))))},pe=Object(U.a)(null,{remove:function(e){return{type:"REMOVE_SONGS",id:e}},play:I})(function(e){var n=e.songs,t=e.remove,a=e.play,i=Object(r.useState)(null),l=Object(_.a)(i,2),c=l[0],s=l[1],u=Object(r.useState)(-1),p=Object(_.a)(u,2),g=p[0],d=p[1],m=function(e){return function(n){var t=n.target;s(t),d(e)}},y=function(e){return function(){return a(e)}};return n.length?o.a.createElement("div",{style:{marginBottom:"100px"}},o.a.createElement(F.a,{id:"simple-menu",anchorEl:c,open:Boolean(c),onClose:function(){return s(null)}},o.a.createElement(K.a,{onClick:function(){return t(g)}},"Remove Song")),o.a.createElement(Y.a,null,n.map(function(e,n){return[o.a.createElement(ue,{key:"song-".concat(e.lastModifiedDate),handleClick:y(n),handleIconClick:m(n),song:e}),o.a.createElement(B.a,{key:"divider-".concat(e.lastModifiedDate)})]}))):o.a.createElement("h4",{style:{fontWeight:300,textAlign:"center"}},"No Songs Present. Please Add Songs")}),ge=t(113),de=t.n(ge),me=t(26),ye=t.n(me),fe=t(114),he=t.n(fe),ve=t(63),Ee=t.n(ve),Se=function(e){var n=e.playState,t=e.playingSong,a=e.currentTime,r=e.togglePlaying,i=e.openNowPlaying;return o.a.createElement(ye.a,{className:"small-now-playing",onClick:function(e){!e.target.closest('[type="button"]')&&t&&i()}},o.a.createElement(de.a,{variant:"determinate",value:a}),o.a.createElement("div",{className:"now-playing-container"},o.a.createElement(oe.a,null,o.a.createElement(se.a,null)),o.a.createElement("div",{className:"song-name"},t?t.name:"[No song]"),o.a.createElement("button",{type:"button",onClick:r},n.playing?o.a.createElement(he.a,null):o.a.createElement(Ee.a,null))))};Se.defaultProps={playingSong:null};var be=Se,Oe=function(e){function n(){var e,t;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(y.a)(this,(e=Object(f.a)(n)).call.apply(e,[this].concat(r)))).handleDragOver=function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},t}return Object(h.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.songs,a=n.playState,r=n.openNowPlaying,i=n.openSnackbar,l=n.currentTime,c=n.addSongs,s=n.toggle;return o.a.createElement("div",{onDragOver:this.handleDragOver,onDrop:function(n){if(e.handleDragOver(n),window.File&&window.FileReader&&window.FileList&&window.Blob){var t=Object(x.a)(n.dataTransfer.files).filter(function(e){var n=e.name;return n&&n.endsWith(".mp3")});t.length>0&&c(t)}else i("The File APIs are not fully supported in this browser.");return!1}},o.a.createElement(pe,{songs:t}),o.a.createElement(M,null),o.a.createElement(be,{togglePlaying:s,playState:a,playingSong:t[a.songId],openNowPlaying:r,currentTime:l}))}}]),n}(r.Component),ke=Object(c.b)(null,function(e){return{toggle:function(){return e(N())},openNowPlaying:function(){return e({type:A})},addSongs:function(n){return e(T(n))}}})(Oe),we=t(119),Pe=t.n(we),je=t(123),Ae=t.n(je),Te=t(122),Ie=t.n(Te),Ne=t(120),xe=t.n(Ne),Re=t(55),Ce=t.n(Re),Le=t(121),Ge=t.n(Le),De=t(116),Me=t.n(De),_e=t(117),Ue=t.n(_e),He=t(115),Be=t.n(He),We=t(118),Ye=t.n(We),ze=[{option:"Home",page:"HOME_PAGE",icon:o.a.createElement(Be.a,null)},{option:"NowPlaying",page:A,icon:o.a.createElement(Me.a,null)},{option:"Playlists",page:P,icon:o.a.createElement(Ue.a,null)},{option:"Settings",page:j,icon:o.a.createElement(Ye.a,null)}],Fe=function(e){function n(){var e,t;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(y.a)(this,(e=Object(f.a)(n)).call.apply(e,[this].concat(r)))).state={open:!1},t.openPage=function(e){return function(){var n=t.props,a=n.openPage,r=n.playState,o=n.openSnackbar;t.setState(function(e){return{open:!e.open}}),e!==P&&e!==j?(r||e!==A)&&e&&a(e):o()}},t}return Object(h.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=this,n=this.state.open;return o.a.createElement("div",null,o.a.createElement(Pe.a,null,o.a.createElement(xe.a,null,o.a.createElement(J.a,{onClick:this.openPage(),color:"inherit","aria-label":"Menu"},o.a.createElement(Ge.a,null)),o.a.createElement(Ce.a,{variant:"h6",color:"inherit"},"Music Player"))),o.a.createElement("div",{className:"header-padding",style:{height:"55px"}}),o.a.createElement(Ie.a,{anchor:"left",open:n,onClose:this.openPage(),onOpen:this.openPage()},o.a.createElement("div",{style:{paddingTop:"50px"}}),ze.map(function(n){return o.a.createElement(Q.a,{key:n.option,button:!0,onClick:e.openPage(n.page)},o.a.createElement(Ae.a,null,n.icon),o.a.createElement(ne.a,null,n.option))})))}}]),n}(r.Component),Ve=Object(c.b)(null,function(e){return{openPage:function(n){return e({type:n})}}})(Fe),Ke=t(131),qe=t.n(Ke),Je=t(124),$e=t.n(Je),Qe=t(127),Xe=t.n(Qe),Ze=t(128),en=t.n(Ze),nn=t(129),tn=t.n(nn),an=t(130),rn=t.n(an),on=t(126),ln=t.n(on),cn=t(125),sn=t.n(cn),un=function(e){function n(){var e,t;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(y.a)(this,(e=Object(f.a)(n)).call.apply(e,[this].concat(r)))).changeRepeat=function(){var e=t.props,n=e.repeatType;(0,e.changeRepeat)(2===n?0:n+1)},t}return Object(h.a)(n,e),Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.installEvent;setTimeout(function(){return"function"===typeof e&&e()},3e3)}},{key:"render",value:function(){var e=this.props,n=e.playState,t=e.song,a=e.playNext,r=e.playPrevious,i=e.currentTime,l=e.repeatType,c=e.togglePlaying,s=e.timeDrag,u=e.openSnackbar;return o.a.createElement(ye.a,{className:"play-control"},o.a.createElement("h3",{className:"song-title"},t.name),o.a.createElement($e.a,{style:{height:"2px"},className:"song-progress",value:i,onChange:function(e,n){return s(n)},max:100,min:0,defaultValue:2}),o.a.createElement("div",{className:"now-playing-container"},o.a.createElement("div",{style:{width:"35%",textAlign:"center"},className:"side-icons"},o.a.createElement(J.a,{onClick:this.changeRepeat},1===l?o.a.createElement(sn.a,null):o.a.createElement(ln.a,{style:2===l?{}:{opacity:.5}})),o.a.createElement(J.a,{onClick:r},o.a.createElement(Xe.a,null))),o.a.createElement("div",{style:{width:"30%",textAlign:"center"},className:"play-pause-button"},o.a.createElement(J.a,{onClick:c},n.playing?o.a.createElement(en.a,null):o.a.createElement(Ee.a,null))),o.a.createElement("div",{style:{width:"35%",textAlign:"center"},className:"side-icons"},o.a.createElement(J.a,{onClick:a},o.a.createElement(tn.a,null)),o.a.createElement(rn.a,{className:"material-icons",style:{color:"rgba(0, 0, 0, 0.3)"},onClick:function(){return u("Shuffle doesn't work yet, You can make a PR \ud83d\ude0a")}}))))}}]),n}(r.Component);un.defaultProps={installEvent:null};var pn=Object(c.b)(function(e){return{playState:e.playState,repeatType:e.common.repeat}},function(e){return{changeRepeat:function(n){return e(function(e){return{type:"REPEAT",id:e}}(n))},togglePlaying:function(){return e(N())}}})(un),gn=function(e){var n=e.playNext,t=e.timeDrag,a=e.repeatType,r=e.currentTime,i=e.playingSong,l=e.openSnackbar,c=e.playPrevious,s=e.installEvent;return o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"30px"}},o.a.createElement(qe.a,{style:{width:"300px",fontSize:"300px",color:"rgba(0,0,0,0.3)"}})),o.a.createElement(pn,{song:i,playNext:n,timeDrag:t,repeatType:a,installEvent:s,currentTime:r,openSnackbar:l,playPrevious:c}))};gn.defaultProps={installEvent:function(){}};var dn=gn,mn=["ARROWLEFT","ARROWRIGHT","SPACE"];var yn=function(e){function n(e){var t;return Object(d.a)(this,n),(t=Object(y.a)(this,Object(f.a)(n).call(this,e))).playNext=function(){var e=t.props,n=e.songs,a=e.playState,r=e.playSong;URL.revokeObjectURL(n[a.songId]),r((a.songId+1)%n.length)},t.songEnded=function(){var e=t.props,n=e.songs,a=e.playState,r=e.repeatType,o=e.playSong;0===r?(URL.revokeObjectURL(n[a.songId]),a.songId<n.length-1&&o(a.songId+1)):1===r?o(a.songId):t.playNext()},t.playPrevious=function(){var e=t.props,n=e.songs,a=e.playState,r=e.playSong;URL.revokeObjectURL(n[a.songId]),r(0===a.songId?n.length-1:a.songId-1)},t.updateTime=function(){var e=100*t.audioPlayer.currentTime/t.audioPlayer.duration||0;t.setState({currentTime:e})},t.playSong=function(e){var n=t.props.songs;if(n[e]){var a=URL.createObjectURL(n[e]);t.audioPlayer.src=a,t.audioPlayer.play(),window.document.title=n[e].name.replace(".mp3","")}},t.timeDrag=function(e){t.audioPlayer.currentTime=t.audioPlayer.duration*(e/100)},t.handleActionClick=function(){window.open("https://github.com/ashinzekene/react-music-player","_blank")},t.handleRequestClose=function(){t.setState({snackBarOpen:!1,snackMsg:"",hideSnackAction:!1})},t.state={currentTime:0,snackBarOpen:!1,hasRejectedInstall:!1,snackMsg:"",hideSnackAction:!1,installEvent:null,addToHomeScreenUIVisible:!1},t}return Object(h.a)(n,e),Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this,n=this.props,t=n.songs,a=n.toggle;t[0]&&(this.audioPlayer.src=URL.createObjectURL(t[0])),this.releaseKeyboardEvents=function(e){var n=function(n){var t=n.code.toUpperCase();if(-1!==mn.indexOf(t)){var a=e.playNext,r=e.playPrevious,o=e.togglePlaying;switch(t){case"ARROWLEFT":r();break;case"ARROWRIGHT":a();break;case"SPACE":o()}}};return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}({playNext:this.playNext,playPrevious:this.playPrevious,togglePlaying:a}),window.addEventListener("beforeinstallprompt",function(n){n.preventDefault(),e.setState({installEvent:n,addToHomeScreenUIVisible:!0})})}},{key:"componentWillReceiveProps",value:function(e){var n=this,t=this.props.playState,a=this.state,r=a.installEvent,o=a.hasRejectedInstall;e.playState!==t&&(e.playState.playing?-1===e.playState.songId?this.playSong(0):e.playState.songId===t.songId?(console.log("Should only resume"),this.audioPlayer.play()):this.playSong(e.playState.songId):this.audioPlayer.pause(),r&&!o&&(r.prompt(),r.userChoice.then(function(e){"accepted"===e.outcome?n.setState({snackBarOpen:!0,hideSnackAction:!0,snackMsg:"\ud83e\udd17 Yay! You've installed the app"}):n.setState({snackBarOpen:!0,hideSnackAction:!0,hasRejectedInstall:!0,snackMsg:"\ud83d\ude25 Reload the page whenever you change your mind"}),n.snackBarOpen({installEvent:null})})))}},{key:"componentWillUnmount",value:function(){this.releaseKeyboardEvents()}},{key:"render",value:function(){var e=this,n=this.state,t=n.currentTime,a=n.snackBarOpen,r=n.snackMsg,i=n.installEvent,l=n.addToHomeScreenUIVisible,c=n.hideSnackAction,s=this.props,u=s.songs,p=s.playState,g=s.toggle,d=s.repeatType,m=s.page;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ve,{playState:p,addToHomeScreenUIVisible:l,playingSong:u[p.songId],openSnackbar:function(){return e.setState({snackBarOpen:!0})}}),o.a.createElement("audio",{hidden:!0,controls:!0,onEnded:this.songEnded,onTimeUpdate:this.updateTime,ref:function(n){e.audioPlayer=n}},o.a.createElement("track",Object.assign({kind:"captions"},{}))),m===A?o.a.createElement(dn,{repeatType:d,playNext:this.playNext,timeDrag:this.timeDrag,installEvent:i,currentTime:t,playPrevious:this.playPrevious,playingSong:u[p.songId],openSnackbar:function(n){return e.setState({snackBarOpen:!0,snackMsg:n})}}):o.a.createElement(ke,{songs:u,toggle:g,playState:p,currentTime:t,openSnackbar:function(n){return e.setState({snackBarOpen:!0,snackMsg:n})}}),o.a.createElement(E.a,{open:a,autoHideDuration:6e3,onClose:this.handleRequestClose,ContentProps:{"aria-describedby":"message-id"},message:o.a.createElement("span",{id:"message-id"},r||"Not Implemented yet \ud83d\ude0a"),action:!c&&o.a.createElement(b.a,{key:"undo",color:"secondary",size:"small",onClick:this.handleActionClick},"MAKE A PR")}))}}]),n}(r.Component),fn=Object(c.b)(function(e){return{page:e.page,songs:e.songs,playState:e.playState,repeatType:e.common.repeat}},function(e){return{toggle:function(){return e(N())},playSong:function(n){return e(I(n))}}})(yn),hn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function vn(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var En={playing:!1,songId:-1},Sn=t(75),bn={sidebarOpen:!1,repeat:0},On=Object(s.b)({songs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_SONGS":return[].concat(Object(x.a)(e),Object(x.a)(n.songs));case"REMOVE_SONGS":return e.filter(function(e,t){return t!==n.id});default:return e}},common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"TOGGLE_SIDEBAR":return Object(Sn.a)({},e,{sidebarOpen:!e.sidebarOpen});case"REPEAT":return Object(Sn.a)({},e,{repeat:n.id});default:return e}},playState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"PLAY_SONG":return{playing:!0,songId:n.id};case"TOGGLE_PLAYING":return Object.assign({},e,{playing:!e.playing});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HOME_PAGE";switch((arguments.length>1?arguments[1]:void 0).type){case"HOME_PAGE":return"HOME_PAGE";case P:return P;case A:return A;case j:return j;default:return e}}}),kn=t(72),wn=Object(u.createMuiTheme)({palette:{primary:g.a}});kn.getItem("state").then(function(e){if(null!==e)return e}).then(function(e){var n;n=Object(s.c)(On,e),k(n),n.subscribe(function(){var e;e={songs:n.getState().songs},kn.setItem("state",e)}),l.a.render(o.a.createElement(c.a,{store:n},o.a.createElement(u.MuiThemeProvider,{theme:wn},o.a.createElement(fn,null))),document.getElementById("root"))}),function(){if("serviceWorker"in navigator){if(new URL("/react-music-player",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/react-music-player","/service-worker.js");hn?function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):vn(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):vn(e)})}}()}},[[135,2,1]]]);
//# sourceMappingURL=main.8a02d499.chunk.js.map